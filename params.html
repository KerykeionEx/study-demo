<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        textarea{
            padding: 10px;
            border: 1px solid #c1c1c1;
            width: 600px;
            word-break: break-all;
        }
        input{
            width: 500px;
            height: 24px;
            line-height: 24px;
        }
    </style>
</head>
<body>
<div>对接字段，创建工单</div>
<hr>
<p>商品卡片</p>
<div>
<textarea id="t1" spellcheck="false" style="height: 200px;">
{
  "card_title":"云客服_智齿客服",
  "card_url":"http://www.sobot.com",
  "card_desc":"云客服,在线客服系统,云呼叫中心,机器人客服,工单客服,智能客服",
  "card_note":"1500元",
  "card_picture":"https://img.sobot.com/console/common/face/admin.png"
}
</textarea>
    <br>
    <button id="b1">发送</button>
</div>
<p>订单卡片</p>
<div>
<textarea id="t2" spellcheck="false" style="height: 300px;">
{
  "order_status": 1,
  "create_time": "1586414406391",
  "order_code": 11111,
  "order_url": "http://www.sobot.com",
  "goods_count": 2,
  "total_fee": 1000,
  "goods": [
    {"name":"商品1","pictureUrl":"https://img.sobot.com/console/common/face/admin.png"},
    {"name":"商品2","pictureUrl":"https://img.sobot.com/console/common/face/admin.png"}
    ]
}
</textarea>
    <br>
    <button id="b2">发送</button>
</div>
<p>自定义参数</p>
<div>
<textarea id="t3" spellcheck="false" style="height: 200px;">
{
  "name":"zhichi",
  "local":"北京"
}
</textarea>
    <br>
    <button id="b3">发送</button>
</div>
<br>
<br>
<br>
<br>
<div>卡片发送消息</div>
<hr>
<div style="margin-top: 30px">
    uid:<input type="text" id="uid" value=""/><br><br>
    cid:<input type="text" id="cid" value=""/>
</div>
<div>
<p>商品卡片发送消息</p>
<textarea id="t5" spellcheck="false" style="height: 300px;">
{
  "title":"组合型洗浴卫浴厨卫柜实木陶瓷",
  "url":"https://www.baidu.com","description":"加大码适合150到200平米",
  "label":"1560元",
  "thumbnail":"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1599546212065&di=942a9aeb7d37f518f924146706c60189&imgtype=0&src=http%3A%2F%2Fm.360buyimg.com%2Fn12%2Fjfs%2Ft568%2F211%2F771311861%2F302938%2F2a075964%2F5489708eNdedd1f24.jpg%2521q70.jpg"
}
</textarea>
<br>
<button id="b5">发送商品卡片消息</button>
</div>

<p>订单卡片发送消息</p>
<div>
<textarea id="t4" spellcheck="false" style="height: 300px;">
{
  "orderStatus": 1,
  "createTime": 1586414406391,
  "orderCode": 11111,
  "orderUrl": "http://www.sobot.com",
  "goodsCount": 2,
  "totalFee": 1540,
  "goods": [
    {"name":"九牧卫浴洗浴盆","pictureUrl":"https://img.sobot.com/console/common/face/admin.png"},
    {"name":"安装服务","pictureUrl":"https://img.sobot.com/console/common/face/admin.png"}
    ]
}
</textarea>
    <br>
    <button id="b4">发送订单卡片消息</button>
</div>
<script>
    document.querySelector("#b1").addEventListener("click",function () {
        var obj = {
            type:"createOrder",
            params:JSON.parse(document.querySelector("#t1").value)
        }
        send(obj)
    })

    document.querySelector("#b2").addEventListener("click",function () {
        var obj = {
            type:"createOrder",
            params:JSON.parse(document.querySelector("#t2").value)
        }
        send(obj)
    })

    document.querySelector("#b3").addEventListener("click",function () {
        var obj = {
            type:"createOrder",
            params:JSON.parse(document.querySelector("#t3").value)
        }
        send(obj)
    })

    document.querySelector("#b4").addEventListener("click",function () {
        var obj = {
            cid: document.querySelector('#cid').value,
            uid: document.querySelector('#uid').value,
            msgType: 25,
            miniPage:JSON.stringify(JSON.parse(document.querySelector("#t4").value))
        }
        send(obj)
    })

    document.querySelector("#b5").addEventListener("click",function () {
        var obj = {
            cid: document.querySelector('#cid').value,
            uid: document.querySelector('#uid').value,
            msgType: 24,
            miniPage:JSON.stringify(JSON.parse(document.querySelector("#t5").value))
        }
        send(obj)
    })

    function send(data) {
        window.parent.postMessage(data,"*")
    }
</script>
</body>
</html>
